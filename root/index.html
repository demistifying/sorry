<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>I'm Sorry ❤️ — A little corner just for you</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Great+Vibes&display=swap"
    rel="stylesheet">
  <style>
    :root {
      --bg: #FBFAFC;
      --card: #FFFFFF;
      --accent: #FF6B9A;
      --muted: #6B5A64;
      --glass: rgba(255, 255, 255, 0.65);
    }

    * {
      box-sizing: border-box
    }

    html,
    body {
      height: 100%;
      margin: 0;
      font-family: Poppins, system-ui, Segoe UI, Roboto, 'Helvetica Neue', Arial;
      background: var(--bg)
    }

    body {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 32px
    }

    /* card */
    .card {
      width: min(900px, 96vw);
      border-radius: 18px;
      padding: 28px;
      background: linear-gradient(180deg, var(--card), #FFF8FB);
      box-shadow: 0 18px 40px rgba(98, 63, 90, 0.06);
      position: relative;
      overflow: hidden
    }

    .header {
      display: flex;
      align-items: center;
      gap: 14px
    }

    .badge {
      padding: 10px 14px;
      border-radius: 12px;
      background: linear-gradient(90deg, var(--accent), #FF9EC6);
      color: white;
      font-weight: 600
    }

    h1 {
      font-family: 'Great Vibes', cursive;
      margin: 0;
      font-size: 36px;
      color: #7A2B4B
    }

    .subtitle {
      color: var(--muted);
      margin-top: 6px
    }

    .layout {
      display: grid;
      grid-template-columns: 1fr 380px;
      gap: 20px;
      margin-top: 18px;
      align-items: start
    }

    @media (max-width:880px) {
      .layout {
        grid-template-columns: 1fr
      }
    }

    .panel {
      background: linear-gradient(180deg, var(--glass), rgba(255, 255, 255, 0.6));
      padding: 18px;
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.7)
    }

    .intro {
      min-height: 64px;
      color: #6B4955;
      font-size: 16px
    }

    .actions {
      margin-top: 14px
    }

    .btn {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 10px 14px;
      border-radius: 999px;
      border: none;
      background: linear-gradient(90deg, var(--accent), #FF8FB0);
      color: white;
      font-weight: 700;
      cursor: pointer;
      box-shadow: 0 8px 22px rgba(255, 107, 154, 0.14);
      transition: transform .16s ease
    }

    .btn:active {
      transform: translateY(2px)
    }

    .muted {
      color: var(--muted)
    }

    .hidden {
      display: none
    }

    /* image */
    .photo-wrap {
      text-align: center
    }

    .photo {
      max-width: 100%;
      border-radius: 12px;
      box-shadow: 0 10px 30px rgba(19, 5, 10, 0.06);
      opacity: 0;
      transform: scale(.96);
      transition: all .5s cubic-bezier(.2, .9, .3, 1)
    }

    /* apology text */
    .apology {
      margin-top: 12px;
      color: #5A3A42;
      min-height: 120px;
      white-space: pre-line;
      font-size: 15px
    }

    /* big heart area */
    .heart-area {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px
    }

    #bigHeart {
      cursor: pointer;
      transition: transform .18s ease
    }

    .hint {
      color: var(--muted);
      font-size: 13px
    }

    /* petals */
    .petal {
      position: absolute;
      width: 12px;
      height: 18px;
      border-radius: 6px;
      opacity: 0.95;
      transform-origin: center;
      pointer-events: none
    }

    /* modal */
    .modal-back {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(0, 0, 0, 0.4);
      backdrop-filter: blur(4px);
      z-index: 9999
    }

    .modal {
      background: white;
      padding: 22px;
      border-radius: 14px;
      box-shadow: 0 18px 50px rgba(20, 10, 20, 0.12);
      width: min(420px, 92vw);
      text-align: center
    }

    .modal h2 {
      margin: 0 0 8px;
      color: #7A2B4B
    }

    .modal p {
      margin: 0 0 18px;
      color: var(--muted)
    }

    .modal .opt {
      display: flex;
      gap: 12px;
      justify-content: center
    }

    .opt button {
      padding: 10px 18px;
      border-radius: 10px;
      border: none;
      font-weight: 700;
      cursor: pointer
    }

    .yes {
      background: linear-gradient(90deg, #FF7B9C, #FFB1CE);
      color: white
    }

    .no {
      background: #F0F0F0;
      color: #7A7A7A
    }

    .meta {
      margin-top: 18px;
      color: var(--muted);
      font-size: 13px;
      text-align: center
    }
  </style>
</head>

<body>

  <main class="card" role="main">
    <div class="header">
      <div class="badge">Sorry Corner</div>
      <div style="margin-left:8px">
        <h1>I'm really sorry</h1>
        <div class="subtitle muted">I made this little corner because you deserve an apology.</div>
      </div>
      <div style="margin-left:auto;text-align:right" class="muted">
        <div style="font-size:12px">Made with care</div>
        <div style="font-size:12px">Click the heart below ♥</div>
      </div>
    </div>

    <div class="layout">
      <!-- Left: message, actions -->
      <div>
        <div class="panel">
          <div class="intro" id="typedIntro"></div>

          <div class="actions">
            <button id="openBtn" class="btn" aria-label="Open apology">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                <path
                  d="M12 21s-7-4.35-9-7.04C-0.1 9.92 4.98 4 11 7.37 11 7.37 12 8 12 8s1-.63 1-0.63C19.02 4 24.1 9.92 21 13.96 19 16.65 12 21 12 21z"
                  fill="white" />
              </svg>
              Open my heart
            </button>
          </div>

          <div id="letter" class="panel hidden" style="margin-top:14px">
            <div class="photo-wrap">
              <img id="usPhoto" class="photo" src="MnH.png" alt="Us">
              <div style="font-size:14px;color:var(--muted);margin-top:8px">This is what my heart looks like</div>
            </div>

            <div id="apologyText" class="apology"></div>

            <div style="display:flex;gap:10px;justify-content:center;margin-top:12px">
              <button id="reopenBtn" class="btn"
                style="background:linear-gradient(90deg,#FFD1E0,#FFB3D2);color:#7A2B4B">Open again</button>
              <button id="downloadBtn" class="btn"
                style="background:linear-gradient(90deg,#FFEAF0,#FFD6E6);color:#7A2B4B">Download</button>
            </div>
          </div>

          <div class="meta"></div>
        </div>
      </div>

      <!-- Right: heart area -->
      <div class="heart-area">
        <div class="panel" style="display:flex;flex-direction:column;align-items:center;gap:8px">
          <svg id="bigHeart" viewBox="0 0 24 24" width="160" height="160">
            <defs>
              <linearGradient id="g" x1="0" x2="1">
                <stop offset="0" stop-color="#FF7B9C" />
                <stop offset="1" stop-color="#FFB1CE" />
              </linearGradient>
            </defs>
            <path
              d="M12 21s-7-4.35-9-7.04C-0.1 9.92 4.98 4 11 7.37 11 7.37 12 8 12 8s1-.63 1-0.63C19.02 4 24.1 9.92 21 13.96 19 16.65 12 21 12 21z"
              fill="url(#g)" stroke="#FF5B84" stroke-width="0.8" />
          </svg>
          <div class="hint muted">Tap the heart to send a tiny bloom</div>
        </div>
      </div>
    </div>

    <div class="modal-back" id="forgiveModal">
      <div class="modal">
        <h2>Do you forgive me?</h2>
        <p>I really hope the answer is yes…</p>
        <div class="opt">
          <button id="yesBtn" class="yes">Yes</button>
          <button id="noBtn" class="no">No</button>
        </div>
      </div>
    </div>

  </main>

  <!-- confetti canvas (top-level) -->
  <canvas id="confetti" style="position:fixed;left:0;top:0;pointer-events:none;z-index:9998"></canvas>

  <script>
    // ----------------- Utility & UI elements -----------------
    const typedIntro = document.getElementById('typedIntro');
    const openBtn = document.getElementById('openBtn');
    const letter = document.getElementById('letter');
    const usPhoto = document.getElementById('usPhoto');
    const apologyText = document.getElementById('apologyText');
    const reopenBtn = document.getElementById('reopenBtn');
    const downloadBtn = document.getElementById('downloadBtn');
    const bigHeart = document.getElementById('bigHeart');
    const forgiveModal = document.getElementById('forgiveModal');
    const yesBtn = document.getElementById('yesBtn');
    const noBtn = document.getElementById('noBtn');
    const confettiCanvas = document.getElementById('confetti');

    // ---------- floating hearts background (decorative) ----------
    (function createFloatingHearts() {
      const sky = document.createElement('div');
      sky.style.position = 'fixed'; sky.style.inset = '0'; sky.style.pointerEvents = 'none';
      document.body.appendChild(sky);
      const colors = ['#FFB7CC', '#FFD1E8', '#FF7B9C', '#FF9EC6'];
      for (let i = 0; i < 10; i++) {
        const el = document.createElement('div'); el.className = 'heart';
        el.style.position = 'absolute'; el.style.left = Math.random() * 100 + 'vw'; el.style.top = Math.random() * 40 + 'vh';
        const s = 18 + Math.random() * 36; el.style.width = s + 'px'; el.style.height = s + 'px';
        const color = colors[Math.floor(Math.random() * colors.length)];
        el.innerHTML = `<svg viewBox="0 0 24 24"><path d="M12 21s-7-4.35-9-7.04C-0.1 9.92 4.98 4 11 7.37 11 7.37 12 8 12 8s1-.63 1-0.63C19.02 4 24.1 9.92 21 13.96 19 16.65 12 21 12 21z" fill='${color}'/></svg>`;
        el.style.opacity = 0.6 + Math.random() * 0.4;
        sky.appendChild(el);
        const dur = 12 + Math.random() * 12;
        el.animate([
          { transform: `translateY(0) rotate(${Math.random() * 20 - 10}deg)`, opacity: el.style.opacity },
          { transform: `translateY(-140vh) rotate(${Math.random() * 80 - 40}deg)`, opacity: 0 }
        ], { duration: dur * 1000, iterations: Infinity, delay: Math.random() * -3000 });
      }
    })();

    // ---------- intro typing ----------
    const intro = `Umm.....I messed up. I know I hurt you and I want to make it right. It might've come off as rude but my heart is always pure. Open my heart to see what's inside my heart.`;
    let introIdx = 0;
    function typeIntro() {
      typedIntro.textContent = intro.slice(0, introIdx + 1);
      introIdx++;
      if (introIdx < intro.length) setTimeout(typeIntro, 28 + Math.random() * 35);
    }
    setTimeout(typeIntro, 600);

    // ---------- confetti helper ----------
    function burstConfetti(x, y) {
      const canvas = confettiCanvas; canvas.width = innerWidth; canvas.height = innerHeight; const ctx = canvas.getContext('2d');
      const colors = ['#FF7B9C', '#FFD1E8', '#FFB1CE', '#FF9EC6', '#FFE3EE'];
      const pieces = [];
      for (let i = 0; i < 80; i++) {
        pieces.push({ x, y, vy: (Math.random() * -6) - 2, vx: (Math.random() * 12) - 6, r: Math.random() * 6 + 2, color: colors[Math.floor(Math.random() * colors.length)], rot: Math.random() * 360 });
      }
      let t = 0; function frame() { t++; ctx.clearRect(0, 0, canvas.width, canvas.height); for (const p of pieces) { p.x += p.vx; p.y += p.vy; p.vy += 0.25; p.rot += p.vx * 0.1; ctx.save(); ctx.translate(p.x, p.y); ctx.rotate(p.rot * Math.PI / 180); ctx.fillStyle = p.color; ctx.fillRect(-p.r / 2, -p.r / 2, p.r, p.r * 1.6); ctx.restore(); } if (t < 130) requestAnimationFrame(frame); else ctx.clearRect(0, 0, canvas.width, canvas.height); }
      frame();
    }

    // ---------- audio tone ----------
    function playTone() {
      try { const ctx = new (window.AudioContext || window.webkitAudioContext)(); const o = ctx.createOscillator(); const g = ctx.createGain(); o.type = 'sine'; o.frequency.value = 520; g.gain.value = 0.03; o.connect(g); g.connect(ctx.destination); o.start(); o.stop(ctx.currentTime + 0.12); } catch (e) { }
    }

    // ---------- apology flow ----------
    const apologyMsg = `I'm sorry for being a little rude when I was only trying to be funny.\nWould never want to hurt you, sweetheart.\nYou are sundar and beautiful and lovely and all you are all the good that has ever happened to me.\nI love you, pretty lady.`;

    function showLetterAndType() {
      letter.classList.remove('hidden');
      // image reveal
      setTimeout(() => { usPhoto.style.opacity = 1; usPhoto.style.transform = 'scale(1)'; }, 200);

      // type apology
      apologyText.textContent = '';
      let k = 0;
      function typeApology() {
        apologyText.textContent = apologyMsg.slice(0, k + 1).replace(/\\n/g, '\n');
        k++;
        if (k < apologyMsg.length) setTimeout(typeApology, 26 + Math.random() * 28);
        else {
          // show forgiveness modal after a beat
          setTimeout(() => { forgiveModal.style.display = 'flex'; }, 700);
        }
      }
      setTimeout(typeApology, 700);
      playTone();
      const rect = letter.getBoundingClientRect(); burstConfetti(rect.left + rect.width / 2, rect.top + 40);
    }

    openBtn.addEventListener('click', () => {
      openBtn.disabled = true; openBtn.style.opacity = 0.8;
      showLetterAndType();
    });
    reopenBtn.addEventListener('click', () => { letter.classList.add('hidden'); openBtn.disabled = false; openBtn.style.opacity = 1; usPhoto.style.opacity = 0; usPhoto.style.transform = 'scale(.96)'; });

    // ---------- download simple PNG of letter ----------
    downloadBtn.addEventListener('click', (e) => {
      e.preventDefault();
      const clone = letter.cloneNode(true);
      clone.style.width = '680px'; clone.style.padding = '20px';
      const svg = `data:image/svg+xml;charset=utf-8,${encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' width='700' height='520'><foreignObject width='700' height='520'>" + new XMLSerializer().serializeToString(clone) + "</foreignObject></svg>")}`;
      const img = new Image(); img.onload = () => { const c = document.createElement('canvas'); c.width = img.width; c.height = img.height; const ctx = c.getContext('2d'); ctx.fillStyle = '#fff'; ctx.fillRect(0, 0, c.width, c.height); ctx.drawImage(img, 0, 0); const a = document.createElement('a'); a.href = c.toDataURL('image/png'); a.download = 'sorry_note.png'; a.click(); };
      img.src = svg;
    });

    // ---------- big heart bloom + redirect ----------
    bigHeart.addEventListener('click', (e) => {
      // bloom
      bigHeart.animate([{ transform: 'scale(1)' }, { transform: 'scale(1.06)' }, { transform: 'scale(1)' }], { duration: 420, easing: 'ease-out' });
      for (let i = 0; i < 10; i++) { const pet = document.createElement('div'); pet.className = 'petal'; pet.style.left = (30 + Math.random() * 40) + '%'; pet.style.top = (10 + Math.random() * 70) + '%'; pet.style.background = ['#FFB7CC', '#FFD1E8', '#FFCFEF'][Math.floor(Math.random() * 3)]; document.querySelector('.card').appendChild(pet); const ang = (Math.random() * 360); pet.animate([{ transform: `translateY(0) rotate(0)`, opacity: 1 }, { transform: `translateY(-160px) rotate(${ang}deg)`, opacity: 0 }], { duration: 800 + Math.random() * 600, easing: 'cubic-bezier(.17,.67,.83,.67)' }).onfinish = () => pet.remove(); }
      playTone();
      // redirect after small delay - replace with your URL
      setTimeout(() => { window.location.href = 'https://justmeantforyou.com/GIUTCn'; }, 900);
    });

    // ---------- forgiveness modal behaviour ----------
    // no-button avoids clicks
    noBtn.addEventListener('mouseenter', () => {
      const dx = (Math.random() * 240) - 120; const dy = (Math.random() * 160) - 80;
      noBtn.style.transform = `translate(${dx}px, ${dy}px)`;
      noBtn.style.transition = 'transform .22s ease';
    });
    noBtn.addEventListener('click', () => {
      // in case it is somehow clicked, gently nudge back and show playful message
      noBtn.style.transform = 'translate(0,0)';
      noBtn.textContent = 'Hmm…';
    });

    yesBtn.addEventListener('click', () => {
      yesBtn.textContent = '❤️ Thank you';
      setTimeout(() => {
        forgiveModal.style.display = 'none';
        burstConfetti(innerWidth / 2, innerHeight / 2);
      }, 320);
    });

    // accessibility: enter opens
    document.addEventListener('keydown', (ev) => { if (ev.key === 'Enter') { if (!letter.classList.contains('hidden')) { /* do nothing */ } else openBtn.click(); } });

    // initial photo CSS reset
    usPhoto.style.opacity = 0; usPhoto.style.transform = 'scale(.96)';

  </script>
</body>

</html>
